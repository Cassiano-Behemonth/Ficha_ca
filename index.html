<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ RPG Records</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transition: background-color 0.4s ease, color 0.4s ease;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ============== TEMAS ============== */
        
        /* Verde e Preto (Investiga√ß√£o Horror) */
        body.green-black {
            background: #0A0A0A;
            color: #81C784;
        }
        body.green-black .tab-bar {
            background: #121212;
            border-bottom: 1px solid #1E1E1E;
        }
        body.green-black .tab.active {
            color: #4CAF50;
            border-bottom: 3px solid #4CAF50;
            font-weight: 700;
        }
        body.green-black .card {
            background: linear-gradient(145deg, #1a1a1a, #151515);
            border: 1px solid #2E2E2E;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        body.green-black .btn-primary {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            color: #000;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }
        body.green-black .stat-btn {
            background: rgba(76, 175, 80, 0.15);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        body.green-black .input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2E2E2E;
            color: #81C784;
        }
        body.green-black .circle {
            border: 2px solid #4CAF50;
        }
        body.green-black .circle.filled {
            background: #4CAF50;
            box-shadow: 0 0 12px rgba(76, 175, 80, 0.6);
        }

        /* Velho Oeste */
        body.wild-west {
            background: #FFF8DC;
            color: #3E2723;
        }
        body.wild-west .tab-bar {
            background: #FFE4B5;
            border-bottom: 1px solid #DEB887;
        }
        body.wild-west .tab.active {
            color: #D2691E;
            border-bottom: 3px solid #D2691E;
            font-weight: 700;
        }
        body.wild-west .card {
            background: linear-gradient(145deg, #fff5e6, #ffe4b5);
            border: 1px solid #DEB887;
            box-shadow: 0 8px 32px rgba(210, 105, 30, 0.15);
        }
        body.wild-west .btn-primary {
            background: linear-gradient(135deg, #D2691E, #DAA520);
            color: #fff;
            box-shadow: 0 4px 12px rgba(210, 105, 30, 0.4);
        }
        body.wild-west .stat-btn {
            background: rgba(210, 105, 30, 0.1);
            color: #D2691E;
            border: 1px solid #D2691E;
        }
        body.wild-west .input {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid #DEB887;
            color: #3E2723;
        }
        body.wild-west .circle {
            border: 3px solid #D2691E;
        }
        body.wild-west .circle.filled {
            background: #D2691E;
            box-shadow: 0 0 12px rgba(210, 105, 30, 0.6);
        }

        /* Vermelho e Branco */
        body.red-white {
            background: #FAFAFA;
            color: #212121;
        }
        body.red-white .tab-bar {
            background: #FFFFFF;
            border-bottom: 1px solid #EEEEEE;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        body.red-white .tab.active {
            color: #E53935;
            border-bottom: 3px solid #E53935;
            font-weight: 700;
        }
        body.red-white .card {
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        body.red-white .btn-primary {
            background: linear-gradient(135deg, #E53935, #EF5350);
            color: #fff;
            box-shadow: 0 4px 12px rgba(229, 57, 53, 0.4);
        }
        body.red-white .stat-btn {
            background: rgba(229, 57, 53, 0.1);
            color: #E53935;
            border: 1px solid #E53935;
        }
        body.red-white .input {
            background: #F5F5F5;
            border: 1px solid #E0E0E0;
            color: #212121;
        }
        body.red-white .circle {
            border: 3px solid #E53935;
        }
        body.red-white .circle.filled {
            background: #E53935;
            box-shadow: 0 0 12px rgba(229, 57, 53, 0.6);
        }

        /* Azul e Branco */
        body.blue-white {
            background: #FAFAFA;
            color: #212121;
        }
        body.blue-white .tab-bar {
            background: #FFFFFF;
            border-bottom: 1px solid #EEEEEE;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        body.blue-white .tab.active {
            color: #2196F3;
            border-bottom: 3px solid #2196F3;
            font-weight: 700;
        }
        body.blue-white .card {
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        body.blue-white .btn-primary {
            background: linear-gradient(135deg, #2196F3, #42A5F5);
            color: #fff;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
        }
        body.blue-white .stat-btn {
            background: rgba(33, 150, 243, 0.1);
            color: #2196F3;
            border: 1px solid #2196F3;
        }
        body.blue-white .input {
            background: #F5F5F5;
            border: 1px solid #E0E0E0;
            color: #212121;
        }
        body.blue-white .circle {
            border: 3px solid #2196F3;
        }
        body.blue-white .circle.filled {
            background: #2196F3;
            box-shadow: 0 0 12px rgba(33, 150, 243, 0.6);
        }

        /* Dourado e Preto */
        body.gold-black {
            background: #0A0A0A;
            color: #FFD54F;
        }
        body.gold-black .tab-bar {
            background: #121212;
            border-bottom: 1px solid #1E1E1E;
        }
        body.gold-black .tab.active {
            color: #FFC107;
            border-bottom: 3px solid #FFC107;
            font-weight: 700;
        }
        body.gold-black .card {
            background: linear-gradient(145deg, #1a1a1a, #151515);
            border: 1px solid #2E2E2E;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        body.gold-black .btn-primary {
            background: linear-gradient(135deg, #FFC107, #FFD54F);
            color: #000;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.4);
        }
        body.gold-black .stat-btn {
            background: rgba(255, 193, 7, 0.15);
            color: #FFC107;
            border: 1px solid #FFC107;
        }
        body.gold-black .input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2E2E2E;
            color: #FFD54F;
        }
        body.gold-black .circle {
            border: 2px solid #FFC107;
        }
        body.gold-black .circle.filled {
            background: #FFC107;
            box-shadow: 0 0 12px rgba(255, 193, 7, 0.6);
        }

        /* Roxo e Cinza */
        body.purple-gray {
            background: #0A0A0A;
            color: #BA68C8;
        }
        body.purple-gray .tab-bar {
            background: #121212;
            border-bottom: 1px solid #1E1E1E;
        }
        body.purple-gray .tab.active {
            color: #9C27B0;
            border-bottom: 3px solid #9C27B0;
            font-weight: 700;
        }
        body.purple-gray .card {
            background: linear-gradient(145deg, #1a1a1a, #151515);
            border: 1px solid #2E2E2E;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        body.purple-gray .btn-primary {
            background: linear-gradient(135deg, #9C27B0, #AB47BC);
            color: #fff;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.4);
        }
        body.purple-gray .stat-btn {
            background: rgba(156, 39, 176, 0.15);
            color: #9C27B0;
            border: 1px solid #9C27B0;
        }
        body.purple-gray .input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2E2E2E;
            color: #BA68C8;
        }
        body.purple-gray .circle {
            border: 2px solid #9C27B0;
        }
        body.purple-gray .circle.filled {
            background: #9C27B0;
            box-shadow: 0 0 12px rgba(156, 39, 176, 0.6);
        }

        /* ============== C√çRCULOS PREENCH√çVEIS ============== */
        
        .circles-container {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .circle {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .circle:hover {
            transform: scale(1.2);
        }

        .circle:active {
            transform: scale(0.9);
        }

        .circle.filled::before {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: 900;
            font-size: 14px;
        }

        /* ============== LAYOUT ============== */
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 24px 20px;
            text-align: center;
            font-size: 28px;
            font-weight: 900;
            letter-spacing: -0.5px;
        }

        .mode-selector {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 16px;
        }

        .mode-btn {
            display: block;
            width: 100%;
            padding: 32px 24px;
            border: none;
            border-radius: 20px;
            font-size: 22px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .mode-btn:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 16px 40px rgba(0,0,0,0.25);
        }

        .mode-btn:active {
            transform: translateY(-2px);
        }

        .mode-btn.horror {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            color: #000;
        }

        .mode-btn.west {
            background: linear-gradient(135deg, #D2691E, #DAA520);
            color: #fff;
        }

        .tab-bar {
            display: flex;
            position: sticky;
            top: 0;
            z-index: 100;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .tab-bar::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            min-width: 100px;
            padding: 18px 12px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            user-select: none;
            position: relative;
        }

        .tab:hover {
            opacity: 0.7;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            padding: 24px;
            margin-bottom: 16px;
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            transform: translateY(-4px);
        }

        .card-title {
            font-size: 13px;
            font-weight: 800;
            margin-bottom: 14px;
            opacity: 0.7;
            letter-spacing: 0.8px;
            text-transform: uppercase;
        }

        .input {
            width: 100%;
            padding: 16px 18px;
            border-radius: 14px;
            font-size: 16px;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .input:focus {
            outline: none;
            transform: scale(1.02);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1);
        }

        textarea.input {
            resize: vertical;
            line-height: 1.7;
            min-height: 100px;
            font-family: inherit;
        }

        textarea.input:focus {
            transform: scale(1.01);
        }

        .stat-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 18px;
            margin-bottom: 12px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.03);
            transition: all 0.3s ease;
        }

        .stat-row:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateX(6px);
        }

        .stat-name {
            font-weight: 700;
            font-size: 16px;
        }

        .stat-controls {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .stat-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 22px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-btn:hover {
            transform: scale(1.2);
        }

        .stat-btn:active {
            transform: scale(0.85);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            min-width: 40px;
            text-align: center;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
        }

        .btn:hover {
            transform: translateY(-3px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid currentColor;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ============== TAMBOR (Rev√≥lver) ============== */
        
        .drum-container {
            text-align: center;
            padding: 40px 20px;
        }

        .drum {
            width: 160px;
            height: 160px;
            margin: 30px auto;
            position: relative;
        }

        .cylinder {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 8px solid currentColor;
            position: relative;
            transition: transform 0.1s ease;
        }

        .cylinder.spinning {
            animation: spinCylinder 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes spinCylinder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(1080deg); }
        }

        .chamber {
            width: 24px;
            height: 24px;
            background: currentColor;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0 0;
        }

        .chamber:nth-child(1) { transform: rotate(0deg) translateX(50px) translateY(-12px); }
        .chamber:nth-child(2) { transform: rotate(60deg) translateX(50px) translateY(-12px); }
        .chamber:nth-child(3) { transform: rotate(120deg) translateX(50px) translateY(-12px); }
        .chamber:nth-child(4) { transform: rotate(180deg) translateX(50px) translateY(-12px); }
        .chamber:nth-child(5) { transform: rotate(240deg) translateX(50px) translateY(-12px); }
        .chamber:nth-child(6) { transform: rotate(300deg) translateX(50px) translateY(-12px); }

        .drum-result {
            font-size: 72px;
            margin: 24px 0;
            font-weight: 900;
        }

        .item-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .item-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.04);
            transition: all 0.3s ease;
        }

        .item-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(6px);
        }

        .item-name {
            font-weight: 700;
            font-size: 16px;
        }

        .item-subtitle {
            font-size: 13px;
            opacity: 0.7;
            margin-top: 4px;
            font-weight: 600;
        }

        .delete-btn {
            color: #f44336;
            cursor: pointer;
            font-size: 24px;
            padding: 8px 12px;
            transition: all 0.3s ease;
            border-radius: 10px;
        }

        .delete-btn:hover {
            background: rgba(244, 67, 54, 0.15);
            transform: scale(1.15);
        }

        .empty-state {
            text-align: center;
            padding: 80px 20px;
            opacity: 0.5;
        }

        .empty-state-icon {
            font-size: 72px;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 16px;
            font-weight: 600;
        }

        .button-row {
            display: flex;
            gap: 12px;
            margin-top: 28px;
        }

        .button-row .btn {
            flex: 1;
        }

        .hidden {
            display: none !important;
        }

        /* Anima√ß√£o de entrada escalonada */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.6s ease;
        }

        .card:nth-child(1) { animation-delay: 0.05s; }
        .card:nth-child(2) { animation-delay: 0.1s; }
        .card:nth-child(3) { animation-delay: 0.15s; }
        .card:nth-child(4) { animation-delay: 0.2s; }
        .card:nth-child(5) { animation-delay: 0.25s; }
        .card:nth-child(6) { animation-delay: 0.3s; }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 18px 28px;
            border-radius: 14px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            z-index: 1000;
            animation: toastIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Modais */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
            padding: 20px;
        }

        .modal {
            background: linear-gradient(145deg, #1E1E1E, #2A2A2A);
            border-radius: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-header {
            padding: 28px 28px 20px 28px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 24px;
            font-weight: 800;
            margin: 0;
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.wild-west .modal-title {
            background: linear-gradient(135deg, #D2691E, #DAA520);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-body {
            padding: 28px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.7);
        }

        .form-input {
            width: 100%;
            padding: 16px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
        }

        body.wild-west .form-input:focus {
            border-color: #D2691E;
            box-shadow: 0 0 0 4px rgba(210, 105, 30, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .modal-footer {
            padding: 20px 28px 28px 28px;
            display: flex;
            gap: 12px;
        }

        .btn-modal {
            flex: 1;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-modal-primary {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            color: #000;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }

        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.5);
        }

        body.wild-west .btn-modal-primary {
            background: linear-gradient(135deg, #D2691E, #DAA520);
            color: #fff;
            box-shadow: 0 4px 12px rgba(210, 105, 30, 0.4);
        }

        body.wild-west .btn-modal-primary:hover {
            box-shadow: 0 6px 16px rgba(210, 105, 30, 0.5);
        }

        .btn-modal-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .btn-modal-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .hidden {
            display: none !important;
        }

        /* Responsivo */
        @media (max-width: 480px) {
            .header {
                font-size: 24px;
                padding: 20px 16px;
            }

            .tab {
                min-width: 80px;
                font-size: 13px;
                padding: 16px 8px;
            }

            .mode-btn {
                padding: 26px 20px;
                font-size: 19px;
            }

            .card {
                padding: 18px;
            }

            .stat-btn {
                width: 38px;
                height: 38px;
                font-size: 20px;
            }

            .circle {
                width: 24px;
                height: 24px;
            }
        }
    </style>
</head>
<body class="green-black">
    <div class="container">
        <!-- Seletor de Modo -->
        <div id="modeSelector" class="mode-selector">
            <div class="header">üé≤ RPG Records</div>
            <button class="mode-btn horror" onclick="selectMode('horror')">
                üëÅÔ∏è Investiga√ß√£o Horror
            </button>
            <button class="mode-btn west" onclick="selectMode('west')">
                ü§† Velho Oeste
            </button>
        </div>

        <!-- Modo Investiga√ß√£o Horror -->
        <div id="horrorMode" class="hidden">
            <div class="tab-bar">
                <div class="tab active" onclick="switchTab('horror', 0)">Ficha</div>
                <div class="tab" onclick="switchTab('horror', 1)">Per√≠cias</div>
                <div class="tab" onclick="switchTab('horror', 2)">Invent√°rio</div>
                <div class="tab" onclick="switchTab('horror', 3)">Descri√ß√£o</div>
            </div>
            
            <div class="content">
                <!-- Ficha -->
                <div class="tab-content active" data-tab="0">
                    <div class="card">
                        <div class="card-title">‚ñ∏ Nome do Personagem</div>
                        <input type="text" class="input" id="horrorName" placeholder="Digite o nome" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üí∞ Dinheiro</div>
                        <input type="text" class="input" id="horrorMoney" placeholder="$0" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">‚öîÔ∏è Atributos</div>
                        <div class="stat-row">
                            <span class="stat-name">For√ßa</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorStr', -1)">‚àí</button>
                                <span class="stat-value" id="horrorStr">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorStr', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Agilidade</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorAgi', -1)">‚àí</button>
                                <span class="stat-value" id="horrorAgi">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorAgi', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Presen√ßa</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorPre', -1)">‚àí</button>
                                <span class="stat-value" id="horrorPre">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorPre', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">NEX</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorNex', -5)">‚àí</button>
                                <span class="stat-value" id="horrorNex">5</span>
                                <button class="stat-btn" onclick="changeStat('horrorNex', 5)">+</button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">‚ù§Ô∏è Vida</div>
                        <div class="stat-row">
                            <span class="stat-name">Atual / M√°xima</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorHpCur', -1)">‚àí</button>
                                <span class="stat-value" id="horrorHpCur">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorHpCur', 1)">+</button>
                                <span style="margin: 0 6px; font-size: 20px; font-weight: 700;">/</span>
                                <span class="stat-value" id="horrorHpMax">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorHpMax', 1)">+</button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üß† Sanidade</div>
                        <div class="stat-row">
                            <span class="stat-name">Atual / M√°xima</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('horrorSanCur', -1)">‚àí</button>
                                <span class="stat-value" id="horrorSanCur">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorSanCur', 1)">+</button>
                                <span style="margin: 0 6px; font-size: 20px; font-weight: 700;">/</span>
                                <span class="stat-value" id="horrorSanMax">0</span>
                                <button class="stat-btn" onclick="changeStat('horrorSanMax', 1)">+</button>
                            </div>
                        </div>
                    </div>

                    <div class="button-row">
                        <button class="btn btn-outline" onclick="changeMode()">Trocar Modo</button>
                        <button class="btn btn-outline" onclick="showThemeSelector()">Trocar Tema</button>
                    </div>
                </div>

                <!-- Per√≠cias -->
                <div class="tab-content" data-tab="1">
                    <div class="card">
                        <div class="card-title">üìö Per√≠cias</div>
                        <div id="horrorSkillsList" class="item-list"></div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="addSkill('horror')">+ Adicionar Per√≠cia</button>
                    </div>
                </div>

                <!-- Invent√°rio -->
                <div class="tab-content" data-tab="2">
                    <div class="card">
                        <div class="card-title">üéí Invent√°rio</div>
                        <div id="horrorInventoryList" class="item-list"></div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="addItem('horror')">+ Adicionar Item</button>
                    </div>
                </div>

                <!-- Descri√ß√£o -->
                <div class="tab-content" data-tab="3">
                    <div class="card">
                        <div class="card-title">üë§ Jogador</div>
                        <input type="text" class="input" id="horrorJogador" placeholder="Nome do jogador" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üåç Origem</div>
                        <input type="text" class="input" id="horrorOrigem" placeholder="De onde veio" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üëÅÔ∏è Apar√™ncia</div>
                        <textarea class="input" id="horrorAparencia" rows="4" placeholder="Descreva a apar√™ncia f√≠sica..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üí≠ Personalidade</div>
                        <textarea class="input" id="horrorPersonalidade" rows="4" placeholder="Como o personagem age e pensa..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üìñ Hist√≥ria</div>
                        <textarea class="input" id="horrorHistoria" rows="6" placeholder="Conte a hist√≥ria do personagem..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üìù Anota√ß√µes</div>
                        <textarea class="input" id="horrorAnotacoes" rows="6" placeholder="Anota√ß√µes gerais..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modo Velho Oeste -->
        <div id="westMode" class="hidden">
            <div class="tab-bar">
                <div class="tab active" onclick="switchTab('west', 0)">Ficha</div>
                <div class="tab" onclick="switchTab('west', 1)">Antecedentes</div>
                <div class="tab" onclick="switchTab('west', 2)">Habilidades</div>
                <div class="tab" onclick="switchTab('west', 3)">Equipamento</div>
                <div class="tab" onclick="switchTab('west', 4)">Descri√ß√£o</div>
            </div>
            
            <div class="content">
                <!-- Ficha -->
                <div class="tab-content active" data-tab="0">
                    <div class="card">
                        <div class="card-title">‚ñ∏ Nome do Personagem</div>
                        <input type="text" class="input" id="westName" placeholder="Digite o nome" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üí∞ Dinheiro</div>
                        <input type="text" class="input" id="westMoney" placeholder="$0" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">‚öîÔ∏è Atributos</div>
                        <div class="stat-row">
                            <span class="stat-name">F√≠sico</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('westFisico', -1)">‚àí</button>
                                <span class="stat-value" id="westFisico">0</span>
                                <button class="stat-btn" onclick="changeStat('westFisico', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Velocidade</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('westVelocidade', -1)">‚àí</button>
                                <span class="stat-value" id="westVelocidade">0</span>
                                <button class="stat-btn" onclick="changeStat('westVelocidade', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Intelecto</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('westIntelecto', -1)">‚àí</button>
                                <span class="stat-value" id="westIntelecto">0</span>
                                <button class="stat-btn" onclick="changeStat('westIntelecto', 1)">+</button>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Coragem</span>
                            <div class="stat-controls">
                                <button class="stat-btn" onclick="changeStat('westCoragem', -1)">‚àí</button>
                                <span class="stat-value" id="westCoragem">0</span>
                                <button class="stat-btn" onclick="changeStat('westCoragem', 1)">+</button>
                            </div>
                        </div>
                    </div>


                    <div class="card">
                        <div class="card-title">üí• Dor (M√°x: 6)</div>
                        <div style="display: flex; justify-content: center; align-items: center; padding: 10px 0;">
                            <div id="dorCircles" class="circles-container"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üíÄ Selo (M√°x: <span id="seloMax">6</span>)</div>
                        <div style="display: flex; justify-content: center; align-items: center; padding: 10px 0;">
                            <div id="seloCircles" class="circles-container"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">‚ûï Modificador de Selo</div>
                        <div class="stat-row">
                            <span class="stat-name">B√¥nus Extra</span>
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <button class="stat-btn" onclick="changeStat('westSeloMod', -1)">‚àí</button>
                                <span class="stat-value" id="westSeloMod">0</span>
                                <button class="stat-btn" onclick="changeStat('westSeloMod', 1)">+</button>
                            </div>
                        </div>
                        <div style="font-size: 12px; opacity: 0.6; text-align: center; margin-top: 8px;">
                            F√≥rmula: 6 + F√≠sico (<span id="westFisicoDisplay">0</span>) + B√¥nus (<span id="westSeloModDisplay">0</span>) = <span id="seloMaxDisplay">6</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üî´ Tambor</div>
                        <div class="drum-container">
                            <div class="drum">
                                <div id="cylinder" class="cylinder">
                                    <div class="chamber"></div>
                                    <div class="chamber"></div>
                                    <div class="chamber"></div>
                                    <div class="chamber"></div>
                                    <div class="chamber"></div>
                                    <div class="chamber"></div>
                                </div>
                            </div>
                            <div id="drumResult" class="drum-result">üé≤</div>
                            <button class="btn btn-primary" onclick="spinDrum()">Girar Tambor</button>
                        </div>
                    </div>

                    <div class="button-row">
                        <button class="btn btn-outline" onclick="changeMode()">Trocar Modo</button>
                        <button class="btn btn-outline" onclick="showThemeSelector()">Trocar Tema</button>
                    </div>
                </div>

                <!-- Antecedentes -->
                <div class="tab-content" data-tab="1">
                    <div class="card">
                        <div class="card-title">üìñ Antecedentes</div>
                        <div id="westBackgroundsList" class="item-list"></div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="addDefaultBackgrounds()">+ Adicionar Padr√£o</button>
                        <button class="btn btn-outline" style="width: 100%; margin-top: 12px;" onclick="addBackground()">+ Novo Antecedente</button>
                    </div>
                </div>

                <!-- Habilidades -->
                <div class="tab-content" data-tab="2">
                    <div class="card">
                        <div class="card-title">‚ö° Habilidades</div>
                        <div id="westSkillsList" class="item-list"></div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="addSkill('west')">+ Adicionar Habilidade</button>
                    </div>
                </div>

                <!-- Equipamento -->
                <div class="tab-content" data-tab="3">
                    <div class="card">
                        <div class="card-title">üî´ Equipamento</div>
                        <div id="westEquipmentList" class="item-list"></div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="addItem('west')">+ Adicionar Equipamento</button>
                    </div>
                </div>

                <!-- Descri√ß√£o -->
                <div class="tab-content" data-tab="4">
                    <div class="card">
                        <div class="card-title">üë§ Jogador</div>
                        <input type="text" class="input" id="westJogador" placeholder="Nome do jogador" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üåç Origem</div>
                        <input type="text" class="input" id="westOrigem" placeholder="De onde veio" oninput="saveData()">
                    </div>

                    <div class="card">
                        <div class="card-title">üëÅÔ∏è Apar√™ncia</div>
                        <textarea class="input" id="westAparencia" rows="4" placeholder="Descreva a apar√™ncia f√≠sica..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üí≠ Personalidade</div>
                        <textarea class="input" id="westPersonalidade" rows="4" placeholder="Como o personagem age e pensa..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üìñ Hist√≥ria</div>
                        <textarea class="input" id="westHistoria" rows="6" placeholder="Conte a hist√≥ria do personagem..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>

                    <div class="card">
                        <div class="card-title">üìù Anota√ß√µes</div>
                        <textarea class="input" id="westAnotacoes" rows="6" placeholder="Anota√ß√µes gerais..." oninput="saveData()" style="resize: vertical; font-size: 15px; line-height: 1.7;"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado global
        let currentMode = null;
        let currentTheme = 'green-black';
        
        const data = {
            horror: {
                name: '',
                money: '',
                str: 0,
                agi: 0,
                pre: 0,
                nex: 5,
                hpCur: 0,
                hpMax: 0,
                sanCur: 0,
                sanMax: 0,
                skills: [],
                inventory: [],
                jogador: '',
                origem: '',
                aparencia: '',
                personalidade: '',
                historia: '',
                anotacoes: ''
            },
            west: {
                name: '',
                money: '',
                fisico: 0,
                velocidade: 0,
                intelecto: 0,
                coragem: 0,
                dor: 0,
                selo: 0,
                seloMod: 0,
                dorCircles: [],
                seloCircles: [],
                backgrounds: [],
                skills: [],
                equipment: [],
                jogador: '',
                origem: '',
                aparencia: '',
                personalidade: '',
                historia: '',
                anotacoes: ''
            }
        };

        // Temas dispon√≠veis
        const themes = {
            'green-black': 'üëÅÔ∏è Verde e Preto',
            'wild-west': 'ü§† Velho Oeste',
            'red-white': '‚ù§Ô∏è Vermelho e Branco',
            'blue-white': 'üíô Azul e Branco',
            'gold-black': 'üí∞ Dourado e Preto',
            'purple-gray': 'üíú Roxo e Cinza'
        };

        // Inicializa√ß√£o
        window.onload = function() {
            loadData();
            if (currentMode) {
                document.getElementById('modeSelector').classList.add('hidden');
                document.getElementById(currentMode + 'Mode').classList.remove('hidden');
                if (currentMode === 'west') {
                    renderCircles();
                }
            }
        };

        // Toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // Selecionar modo
        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeSelector').classList.add('hidden');
            document.getElementById(mode + 'Mode').classList.remove('hidden');
            
            // Aplicar tema padr√£o
            if (mode === 'west') {
                applyTheme('wild-west');
                renderCircles();
            } else {
                applyTheme('green-black');
            }
            
            loadData();
            saveData();
        }

        // Trocar modo
        function changeMode() {
            saveData();
            if (currentMode === 'horror') {
                document.getElementById('horrorMode').classList.add('hidden');
                currentMode = 'west';
                document.getElementById('westMode').classList.remove('hidden');
                applyTheme('wild-west');
                renderCircles();
            } else {
                document.getElementById('westMode').classList.add('hidden');
                currentMode = 'horror';
                document.getElementById('horrorMode').classList.remove('hidden');
                applyTheme('green-black');
            }
            loadData();
            showToast('Modo alterado!');
        }

        // Trocar aba
        function switchTab(mode, index) {
            const container = document.getElementById(mode + 'Mode');
            const tabs = container.querySelectorAll('.tab');
            const contents = container.querySelectorAll('.tab-content');
            
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            contents.forEach((content, i) => {
                if (i === index) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        // Renderizar c√≠rculos
        function renderCircles() {
            const forca = parseInt(document.getElementById('westFisico')?.textContent) || 0;
            const seloMod = parseInt(document.getElementById('westSeloMod')?.textContent) || 0;
            const seloMax = Math.max(1, 6 + forca + seloMod); // M√≠nimo 1
            const dorMax = 6;
            
            const dorValue = data.west.dor || 0;
            const seloValue = data.west.selo || 0;
            
            renderCircleSet('dorCircles', dorValue, dorMax);
            renderCircleSet('seloCircles', seloValue, seloMax);
            
            // Atualizar displays do Selo Max
            const seloMaxElem = document.getElementById('seloMax');
            if (seloMaxElem) {
                seloMaxElem.textContent = seloMax;
            }
            
            // Atualizar displays da f√≥rmula
            const fisicoDisplay = document.getElementById('westFisicoDisplay');
            const seloModDisplay = document.getElementById('westSeloModDisplay');
            const seloMaxDisplay = document.getElementById('seloMaxDisplay');
            
            if (fisicoDisplay) fisicoDisplay.textContent = forca;
            if (seloModDisplay) seloModDisplay.textContent = seloMod;
            if (seloMaxDisplay) seloMaxDisplay.textContent = seloMax;
        }

        function renderCircleSet(containerId, count, max) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            for (let i = 0; i < max; i++) {
                const circle = document.createElement('div');
                circle.className = 'circle';
                if (i < count) {
                    circle.classList.add('filled');
                }
                circle.onclick = () => toggleCircle(containerId, i);
                container.appendChild(circle);
            }
        }

        function toggleCircle(containerId, index) {
            const isDor = containerId === 'dorCircles';
            const currentValue = isDor ? data.west.dor : data.west.selo;
            
            if (index < currentValue) {
                // Desmarcar at√© este c√≠rculo
                if (isDor) {
                    data.west.dor = index;
                } else {
                    data.west.selo = index;
                }
            } else {
                // Marcar at√© este c√≠rculo
                if (isDor) {
                    data.west.dor = index + 1;
                } else {
                    data.west.selo = index + 1;
                }
            }
            
            renderCircles();
            saveData();
        }

        // Mudar estat√≠stica
        function changeStat(id, delta) {
            const elem = document.getElementById(id);
            let value = parseInt(elem.textContent) || 0;
            
            // SeloMod pode ser negativo (penalidade), outros stats n√£o
            if (id === 'westSeloMod') {
                value = value + delta;
            } else {
                value = Math.max(0, value + delta);
            }
            
            elem.textContent = value;
            
            // Anima√ß√£o ao mudar
            elem.style.transform = 'scale(1.3)';
            setTimeout(() => elem.style.transform = 'scale(1)', 200);
            
            // Se mudou F√≠sico ou SeloMod, recalcular Selo Max
            if (id === 'westFisico' || id === 'westSeloMod') {
                updateSeloMax();
            }
            
            saveData();
        }

        // Calcular e atualizar Selo Max
        function updateSeloMax() {
            const forca = parseInt(document.getElementById('westFisico')?.textContent) || 0;
            const seloMod = parseInt(document.getElementById('westSeloMod')?.textContent) || 0;
            const seloMax = Math.max(1, 6 + forca + seloMod); // M√≠nimo 1
            const seloMaxElem = document.getElementById('seloMax');
            if (seloMaxElem) {
                seloMaxElem.textContent = seloMax;
            }
            // Atualizar c√≠rculos com novo m√°ximo
            if (currentMode === 'west') {
                renderCircles();
            }
        }

        // Girar tambor (rolar dado)
        function spinDrum() {
            const cylinder = document.getElementById('cylinder');
            const result = document.getElementById('drumResult');
            
            cylinder.classList.remove('spinning');
            result.textContent = 'üé≤';
            
            setTimeout(() => {
                cylinder.classList.add('spinning');
                
                setTimeout(() => {
                    const roll = Math.floor(Math.random() * 6) + 1;
                    result.textContent = 'üí• ' + roll;
                    cylinder.classList.remove('spinning');
                    showToast('Resultado: ' + roll);
                }, 1200);
            }, 50);
        }

        // Adicionar per√≠cia/habilidade
        // Vari√°vel global para rastrear modo e edi√ß√£o
        let currentModalMode = '';
        let editingSkillIndex = -1;
        let editingItemIndex = -1;

        // Abrir modal de habilidade
        function addSkill(mode) {
            currentModalMode = mode;
            editingSkillIndex = -1;
            document.getElementById('skillModalTitle').textContent = mode === 'horror' ? '‚ú® Nova Per√≠cia' : '‚ú® Nova Habilidade';
            document.getElementById('skillNameInput').value = '';
            document.getElementById('skillDanoInput').value = '';
            document.getElementById('skillDescInput').value = '';
            document.getElementById('skillModal').classList.remove('hidden');
            document.getElementById('skillNameInput').focus();
        }

        // Salvar habilidade do modal
        function saveSkill() {
            const name = document.getElementById('skillNameInput').value.trim();
            const dano = document.getElementById('skillDanoInput').value.trim();
            const desc = document.getElementById('skillDescInput').value.trim();
            
            if (!name) {
                showToast('Por favor, digite um nome!');
                return;
            }
            
            if (editingSkillIndex >= 0) {
                // Editando habilidade existente
                data[currentModalMode].skills[editingSkillIndex] = { name, dano, desc };
            } else {
                // Adicionando nova habilidade
                data[currentModalMode].skills.push({ name, dano, desc });
            }
            
            renderSkills(currentModalMode);
            saveData();
            closeModal('skillModal');
            showToast(editingSkillIndex >= 0 ? 'Atualizado!' : 'Adicionado!');
        }

        // Fechar modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Fechar modal ao clicar fora
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal-overlay')) {
                closeModal(e.target.id);
            }
        });

        // Fechar modal com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal('skillModal');
                closeModal('itemModal');
            }
        });

        // Salvar com Enter nos campos de nome dos modais
        document.addEventListener('DOMContentLoaded', function() {
            ['skillNameInput', 'skillDanoInput'].forEach(id => {
                document.getElementById(id).addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        saveSkill();
                    }
                });
            });
            
            document.getElementById('itemNameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    saveItem();
                }
            });
        });

        // Renderizar per√≠cias
        function renderSkills(mode) {
            const listId = mode + 'SkillsList';
            const list = document.getElementById(listId);
            
            if (data[mode].skills.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìö</div><div class="empty-state-text">Nenhuma ' + (mode === 'horror' ? 'per√≠cia' : 'habilidade') + ' cadastrada</div></div>';
                return;
            }
            
            list.innerHTML = data[mode].skills.map((skill, i) => `
                <div class="item-card">
                    <div style="flex: 1;">
                        <div class="item-name">${skill.name}</div>
                        <div class="item-subtitle">Dano: ${skill.dano || skill.points || '-'}</div>
                        ${skill.desc ? `<div class="item-subtitle" style="margin-top: 4px; opacity: 0.7;">${skill.desc}</div>` : ''}
                    </div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span class="delete-btn" data-action="edit-skill" data-mode="${mode}" data-index="${i}" style="cursor: pointer;">‚úèÔ∏è</span>
                        <span class="delete-btn" data-action="delete-skill" data-mode="${mode}" data-index="${i}" style="cursor: pointer;">üóëÔ∏è</span>
                    </div>
                </div>
            `).join('');
            
            // Adicionar event listeners
            attachSkillListeners(mode);
        }
        
        // Adicionar event listeners para skills
        function attachSkillListeners(mode) {
            const listId = mode + 'SkillsList';
            const list = document.getElementById(listId);
            
            list.querySelectorAll('[data-action]').forEach(element => {
                element.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const action = this.getAttribute('data-action');
                    const mode = this.getAttribute('data-mode');
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    if (action === 'edit-skill') {
                        editSkill(mode, index);
                    } else if (action === 'delete-skill') {
                        deleteSkill(mode, index);
                    }
                });
            });
        }

        // Editar habilidade
        function editSkill(mode, index) {
            currentModalMode = mode;
            editingSkillIndex = index;
            const skill = data[mode].skills[index];
            
            document.getElementById('skillModalTitle').textContent = mode === 'horror' ? '‚úèÔ∏è Editar Per√≠cia' : '‚úèÔ∏è Editar Habilidade';
            document.getElementById('skillNameInput').value = skill.name;
            document.getElementById('skillDanoInput').value = skill.dano || skill.points || '';
            document.getElementById('skillDescInput').value = skill.desc || '';
            document.getElementById('skillModal').classList.remove('hidden');
            document.getElementById('skillNameInput').focus();
        }

        // Mudar dano de per√≠cia
        // Deletar per√≠cia
        function deleteSkill(mode, index) {
            data[mode].skills.splice(index, 1);
            renderSkills(mode);
            saveData();
            showToast('Deletado!');
        }

        // Abrir modal de item
        function addItem(mode) {
            currentModalMode = mode;
            editingItemIndex = -1;
            document.getElementById('itemModalTitle').textContent = mode === 'horror' ? 'üéí Novo Item' : 'üéí Novo Equipamento';
            document.getElementById('itemNameInput').value = '';
            document.getElementById('itemDanoInput').value = '';
            document.getElementById('itemDescInput').value = '';
            document.getElementById('itemModal').classList.remove('hidden');
            document.getElementById('itemNameInput').focus();
        }

        // Salvar item do modal
        function saveItem() {
            const name = document.getElementById('itemNameInput').value.trim();
            const dano = document.getElementById('itemDanoInput').value.trim();
            const desc = document.getElementById('itemDescInput').value.trim();
            
            if (!name) {
                showToast('Por favor, digite um nome!');
                return;
            }
            
            const field = currentModalMode === 'horror' ? 'inventory' : 'equipment';
            const item = { name, dano, desc };
            
            if (editingItemIndex >= 0) {
                // Editando item existente
                data[currentModalMode][field][editingItemIndex] = item;
            } else {
                // Adicionando novo item
                data[currentModalMode][field].push(item);
            }
            
            renderItems(currentModalMode);
            saveData();
            closeModal('itemModal');
            showToast(editingItemIndex >= 0 ? 'Atualizado!' : 'Adicionado!');
        }

        // Renderizar invent√°rio/equipamento
        function renderItems(mode) {
            const field = mode === 'horror' ? 'inventory' : 'equipment';
            const listId = mode === 'horror' ? 'horrorInventoryList' : 'westEquipmentList';
            const list = document.getElementById(listId);
            
            if (data[mode][field].length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üéí</div><div class="empty-state-text">Nenhum item cadastrado</div></div>';
                return;
            }
            
            list.innerHTML = data[mode][field].map((item, i) => `
                <div class="item-card">
                    <div style="flex: 1;">
                        <div class="item-name">${item.name}</div>
                        ${item.dano ? `<div class="item-subtitle">Dano: ${item.dano}</div>` : ''}
                        ${item.desc ? `<div class="item-subtitle">${item.desc}</div>` : ''}
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <span class="delete-btn" data-action="edit-item" data-mode="${mode}" data-index="${i}" style="cursor: pointer;">‚úèÔ∏è</span>
                        <span class="delete-btn" data-action="delete-item" data-mode="${mode}" data-index="${i}" style="cursor: pointer;">üóëÔ∏è</span>
                    </div>
                </div>
            `).join('');
            
            // Adicionar event listeners
            attachItemListeners(mode);
        }
        
        // Adicionar event listeners para items
        function attachItemListeners(mode) {
            const listId = mode === 'horror' ? 'horrorInventoryList' : 'westEquipmentList';
            const list = document.getElementById(listId);
            
            list.querySelectorAll('[data-action]').forEach(element => {
                element.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const action = this.getAttribute('data-action');
                    const mode = this.getAttribute('data-mode');
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    if (action === 'edit-item') {
                        editItem(mode, index);
                    } else if (action === 'delete-item') {
                        deleteItem(mode, index);
                    }
                });
            });
        }

        // Editar item
        function editItem(mode, index) {
            currentModalMode = mode;
            editingItemIndex = index;
            const field = mode === 'horror' ? 'inventory' : 'equipment';
            const item = data[mode][field][index];
            
            document.getElementById('itemModalTitle').textContent = mode === 'horror' ? '‚úèÔ∏è Editar Item' : '‚úèÔ∏è Editar Equipamento';
            document.getElementById('itemNameInput').value = item.name;
            document.getElementById('itemDanoInput').value = item.dano || '';
            document.getElementById('itemDescInput').value = item.desc || '';
            document.getElementById('itemModal').classList.remove('hidden');
            document.getElementById('itemNameInput').focus();
        }

        // Deletar item
        function deleteItem(mode, index) {
            const field = mode === 'horror' ? 'inventory' : 'equipment';
            data[mode][field].splice(index, 1);
            renderItems(mode);
            saveData();
            showToast('Deletado!');
        }

        // Adicionar antecedentes padr√£o
        function addDefaultBackgrounds() {
            const defaults = ['Aten√ß√£o', 'Medicina', 'Montaria', 'Neg√≥cios', 'Roubo', 'Suor', 'Tradi√ß√£o', 'Viol√™ncia'];
            defaults.forEach(name => {
                if (!data.west.backgrounds.find(b => b.name === name)) {
                    data.west.backgrounds.push({ name, points: 0 });
                }
            });
            renderBackgrounds();
            saveData();
            showToast('Antecedentes padr√£o adicionados!');
        }

        // Adicionar antecedente
        function addBackground() {
            const name = prompt('Nome do antecedente:');
            if (!name) return;
            
            data.west.backgrounds.push({ name, points: 0 });
            renderBackgrounds();
            saveData();
            showToast('Adicionado!');
        }

        // Renderizar antecedentes
        function renderBackgrounds() {
            const list = document.getElementById('westBackgroundsList');
            
            if (data.west.backgrounds.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìñ</div><div class="empty-state-text">Nenhum antecedente cadastrado</div></div>';
                return;
            }
            
            list.innerHTML = data.west.backgrounds.map((bg, i) => `
                <div class="item-card">
                    <div>
                        <div class="item-name">${bg.name}</div>
                        <div class="item-subtitle">1d6 + ${bg.points}</div>
                    </div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <button class="stat-btn" onclick="changeBackgroundPoints(${i}, -1)">‚àí</button>
                        <span class="stat-value">${bg.points}</span>
                        <button class="stat-btn" onclick="changeBackgroundPoints(${i}, 1)">+</button>
                        <span class="delete-btn" onclick="deleteBackground(${i})" style="cursor: pointer;">üóëÔ∏è</span>
                    </div>
                </div>
            `).join('');
        }

        // Mudar pontos de antecedente
        function changeBackgroundPoints(index, delta) {
            data.west.backgrounds[index].points = Math.max(0, data.west.backgrounds[index].points + delta);
            renderBackgrounds();
            saveData();
        }

        // Deletar antecedente
        function deleteBackground(index) {
            data.west.backgrounds.splice(index, 1);
            renderBackgrounds();
            saveData();
            showToast('Deletado!');
        }

        // Seletor de tema
        function showThemeSelector() {
            let options = 'Escolha um tema:\n\n';
            for (let key in themes) {
                options += key + ' - ' + themes[key] + '\n';
            }
            const choice = prompt(options);
            if (choice && themes[choice]) {
                applyTheme(choice);
                showToast('Tema alterado!');
            }
        }

        // Aplicar tema
        function applyTheme(theme) {
            currentTheme = theme;
            document.body.className = theme;
            saveData();
        }

        // Salvar dados
        function saveData() {
            // Salvar campos de texto
            if (currentMode === 'horror') {
                data.horror.name = document.getElementById('horrorName')?.value || '';
                data.horror.money = document.getElementById('horrorMoney')?.value || '';
                data.horror.jogador = document.getElementById('horrorJogador')?.value || '';
                data.horror.origem = document.getElementById('horrorOrigem')?.value || '';
                data.horror.aparencia = document.getElementById('horrorAparencia')?.value || '';
                data.horror.personalidade = document.getElementById('horrorPersonalidade')?.value || '';
                data.horror.historia = document.getElementById('horrorHistoria')?.value || '';
                data.horror.anotacoes = document.getElementById('horrorAnotacoes')?.value || '';
                
                // Salvar stats
                data.horror.str = parseInt(document.getElementById('horrorStr')?.textContent) || 0;
                data.horror.agi = parseInt(document.getElementById('horrorAgi')?.textContent) || 0;
                data.horror.pre = parseInt(document.getElementById('horrorPre')?.textContent) || 0;
                data.horror.nex = parseInt(document.getElementById('horrorNex')?.textContent) || 5;
                data.horror.hpCur = parseInt(document.getElementById('horrorHpCur')?.textContent) || 0;
                data.horror.hpMax = parseInt(document.getElementById('horrorHpMax')?.textContent) || 0;
                data.horror.sanCur = parseInt(document.getElementById('horrorSanCur')?.textContent) || 0;
                data.horror.sanMax = parseInt(document.getElementById('horrorSanMax')?.textContent) || 0;
            } else if (currentMode === 'west') {
                data.west.name = document.getElementById('westName')?.value || '';
                data.west.money = document.getElementById('westMoney')?.value || '';
                data.west.jogador = document.getElementById('westJogador')?.value || '';
                data.west.origem = document.getElementById('westOrigem')?.value || '';
                data.west.aparencia = document.getElementById('westAparencia')?.value || '';
                data.west.personalidade = document.getElementById('westPersonalidade')?.value || '';
                data.west.historia = document.getElementById('westHistoria')?.value || '';
                data.west.anotacoes = document.getElementById('westAnotacoes')?.value || '';
                
                // Salvar stats
                data.west.fisico = parseInt(document.getElementById('westFisico')?.textContent) || 0;
                data.west.velocidade = parseInt(document.getElementById('westVelocidade')?.textContent) || 0;
                data.west.intelecto = parseInt(document.getElementById('westIntelecto')?.textContent) || 0;
                data.west.coragem = parseInt(document.getElementById('westCoragem')?.textContent) || 0;
                data.west.seloMod = parseInt(document.getElementById('westSeloMod')?.textContent) || 0;
                // Dor e Selo j√° est√£o salvos em data.west.dor e data.west.selo
            }
            
            localStorage.setItem('rpgData', JSON.stringify(data));
            localStorage.setItem('currentMode', currentMode);
            localStorage.setItem('currentTheme', currentTheme);
        }

        // Carregar dados
        function loadData() {
            const saved = localStorage.getItem('rpgData');
            const savedMode = localStorage.getItem('currentMode');
            const savedTheme = localStorage.getItem('currentTheme');
            
            if (saved) {
                Object.assign(data, JSON.parse(saved));
                
                // Migrar dados antigos de "points" para "dano"
                ['horror', 'west'].forEach(mode => {
                    if (data[mode].skills) {
                        data[mode].skills = data[mode].skills.map(skill => {
                            if (skill.points !== undefined && skill.dano === undefined) {
                                return { 
                                    name: skill.name, 
                                    dano: skill.points, 
                                    desc: skill.desc || '' 
                                };
                            }
                            return skill;
                        });
                    }
                });
            }
            
            if (savedMode) {
                currentMode = savedMode;
            }
            
            if (savedTheme) {
                applyTheme(savedTheme);
            }
            
            // Carregar dados do modo horror
            if (document.getElementById('horrorName')) {
                document.getElementById('horrorName').value = data.horror.name;
                document.getElementById('horrorMoney').value = data.horror.money;
                document.getElementById('horrorJogador').value = data.horror.jogador || '';
                document.getElementById('horrorOrigem').value = data.horror.origem || '';
                document.getElementById('horrorAparencia').value = data.horror.aparencia || '';
                document.getElementById('horrorPersonalidade').value = data.horror.personalidade || '';
                document.getElementById('horrorHistoria').value = data.horror.historia || '';
                document.getElementById('horrorAnotacoes').value = data.horror.anotacoes || '';
                document.getElementById('horrorStr').textContent = data.horror.str;
                document.getElementById('horrorAgi').textContent = data.horror.agi;
                document.getElementById('horrorPre').textContent = data.horror.pre;
                document.getElementById('horrorNex').textContent = data.horror.nex;
                document.getElementById('horrorHpCur').textContent = data.horror.hpCur;
                document.getElementById('horrorHpMax').textContent = data.horror.hpMax;
                document.getElementById('horrorSanCur').textContent = data.horror.sanCur;
                document.getElementById('horrorSanMax').textContent = data.horror.sanMax;
                renderSkills('horror');
                renderItems('horror');
            }
            
            // Carregar dados do modo west
            if (document.getElementById('westName')) {
                document.getElementById('westName').value = data.west.name;
                document.getElementById('westMoney').value = data.west.money;
                document.getElementById('westJogador').value = data.west.jogador || '';
                document.getElementById('westOrigem').value = data.west.origem || '';
                document.getElementById('westAparencia').value = data.west.aparencia || '';
                document.getElementById('westPersonalidade').value = data.west.personalidade || '';
                document.getElementById('westHistoria').value = data.west.historia || '';
                document.getElementById('westAnotacoes').value = data.west.anotacoes || '';
                document.getElementById('westFisico').textContent = data.west.fisico || 0;
                document.getElementById('westVelocidade').textContent = data.west.velocidade || 0;
                document.getElementById('westIntelecto').textContent = data.west.intelecto || 0;
                document.getElementById('westCoragem').textContent = data.west.coragem || 0;
                document.getElementById('westSeloMod').textContent = data.west.seloMod || 0;
                // Dor e Selo s√£o gerenciados pelos c√≠rculos
                renderSkills('west');
                renderItems('west');
                renderBackgrounds();
                updateSeloMax();
                renderCircles();
            }
        }

        // Touch events para swipe entre tabs
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            if (!currentMode) return;
            
            const container = document.getElementById(currentMode + 'Mode');
            const tabs = container.querySelectorAll('.tab');
            let currentTab = 0;
            
            tabs.forEach((tab, i) => {
                if (tab.classList.contains('active')) {
                    currentTab = i;
                }
            });
            
            if (touchEndX < touchStartX - 50 && currentTab < tabs.length - 1) {
                // Swipe left - pr√≥xima tab
                switchTab(currentMode, currentTab + 1);
            }
            
            if (touchEndX > touchStartX + 50 && currentTab > 0) {
                // Swipe right - tab anterior
                switchTab(currentMode, currentTab - 1);
            }
        }
    </script>
    <!-- Modal para Habilidades/Per√≠cias -->
    <div id="skillModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="skillModalTitle">‚ú® Nova Habilidade</h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome da Habilidade</label>
                    <input type="text" class="form-input" id="skillNameInput" placeholder="Ex: Acrobacia, Investiga√ß√£o...">
                </div>
                <div class="form-group">
                    <label class="form-label">Dano</label>
                    <input type="text" class="form-input" id="skillDanoInput" placeholder="Ex: 1d6+2, 2d8, 10">
                </div>
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o (Opcional)</label>
                    <textarea class="form-input form-textarea" id="skillDescInput" placeholder="Adicione detalhes sobre a habilidade..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-secondary" onclick="closeModal('skillModal')">Cancelar</button>
                <button class="btn-modal btn-modal-primary" onclick="saveSkill()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Equipamentos/Itens -->
    <div id="itemModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="itemModalTitle">üéí Novo Item</h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome do Item</label>
                    <input type="text" class="form-input" id="itemNameInput" placeholder="Ex: Espada Longa, Po√ß√£o de Cura...">
                </div>
                <div class="form-group">
                    <label class="form-label">Dano (Opcional)</label>
                    <input type="text" class="form-input" id="itemDanoInput" placeholder="Ex: 1d8+2, 2d6, 10">
                </div>
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o (Opcional)</label>
                    <textarea class="form-input form-textarea" id="itemDescInput" placeholder="Adicione detalhes sobre o item..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-secondary" onclick="closeModal('itemModal')">Cancelar</button>
                <button class="btn-modal btn-modal-primary" onclick="saveItem()">Salvar</button>
            </div>
        </div>
    </div>

</body>
</html>